# 設計仕様書：探索ポータル (Discovery Portal)

## 1. 概要
「世界最高のクラシックサイト」を実現するため、単なる一覧表示を超えた、多角的な切り口から音楽の深淵に触れるための「探索ポータル」を構築する。

## 2. カテゴリ別の役割と探索体験 (Discovery Experience)

### 2.1. Works (楽曲一覧) - 「出会いの核」
- **目的**: ユーザーの多様なニーズ（弾きたい、聴きたい、調べたい）に即応する。
- **機能**: 
    - 難易度（初級、中級、上級）による絞り込み
    - 楽器（ピアノ、バイオリン、フルート等）による絞り込み
    - 時代（バロック、古典、ロマン、近代・現代）による絞り込み
    - 調性（ハ長調、ニ短調等）によるソート・フィルタ
- **デザイン**: 生成AIにより個別に作成された高品質なサムネイルを活用したカードグリッド。

### 2.2. Composers (作曲家) - 「家系図的ポータル」
- **目的**: 人物像と時代背景から作品へ導く。
- **機能**: 
    - **デザイン**: コンテンツ個別のサムネイル（AI生成肖像画等）を前面に出したビジュアルグリッド。
    - 時代・国籍・流派によるシステマチックな整理。
    - 作曲家の生涯と代表曲へのリンク。

### 2.3. Eras / Instruments (時代・楽器) - 「文脈からの探索」
- **目的**: 音楽史の大きな流れや、特定の音色への興味から楽曲へ導く。
- **デザイン**: その時代や楽器を象徴するイメージ画像を用いた、読み物への入り口。

### 2.4. Theory / Terminology (理論・用語) - 「インタラクティブ百科事典」
- **目的**: 楽曲解説（MDX）を支える知識基盤。
- **機能**: 
    - サブカテゴリ（楽曲形式、楽譜の読み方等）による論理的なグルーピング。
    - シリーズものとしての体系的な表示。
    - （将来的に）楽曲詳細ページからのスムーズなリンク遷移。

## 3. 共通システム設計

### 3.1. クリーンアーキテクチャ準拠
- **Domain**: `ContentFilterCriteria` 型を定義し、ソート・フィルタの「意図」を抽象化。
- **Application**: `GetCategoryContentsUseCase` により、UI状態からドメイン要求への変換。
- **Infrastructure**: `FsContentRepository` (現在はファイルベース) での実装。将来のDB化を隠蔽。
- **UI**: `useFilterState` によるURLクエリパラメータとの同期。

### 3.2. 多言語対応 (i18n)
- **対象**: JA (Master), EN, ES, DE, FR, IT, ZH (全7言語)。
- **辞書**: `infrastructure/i18n/messages/*.json` で、カテゴリ名やフィルター定数を定義。

### 3.3. YouTube サムネイル自動解決 (YoutubeMediaAdapter)
- **役割**: 基本的にはコンテンツ側が保持する `thumbnail` プロパティ（AI生成画像）を優先するが、未設定の場合や動画メインのコンテンツにおいて YouTube サムネイルを補完的に使用するためのフォールバック。
- **仕様**: 解像度順（`maxresdefault` > `hqdefault` 等）の優先順位付き取得ロジック。
- プラットフォーム固有の知識をインフラ層（アダプター）に封じ込める。

## 4. UI/UX 仕様
- **レスポンシブ**: モバイルファースト。画面幅に応じたグリッド列数の最適化。
- **フィードバック**: スケルトン表示（Loading State）による、体感速度の向上。
- **空状態 (Empty State)**: 検索・フィルタヒット0件時の親切な案内。

## 5. 実装スケジュール
- Phase 1: ドメイン＆アプリケーション（ロジックの核）
- Phase 2: インフラ（データ取得・アダプター）
- Phase 3: UI基盤（汎用コンポーネント・ルーティング）
- Phase 4: 多言語適用
- Phase 5: カテゴリ別の個別最適化 (PortraitGrid, DictionaryLayout 等)
