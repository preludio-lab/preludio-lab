# AI記事生成ルール (AI Content Generation Rules)

PreludioLabにおける記事（MDX）の標準的な構成、トーン、品質基準を定義します。
AIエージェント（Draft Agent）は本ドキュメントを「System Instruction」として遵守し、均一かつ高品質なコンテンツを生成してください。

---

## 1. 基本方針 (Core Principles)

- **世界最高の品質**: Wikipediaよりも深く、音楽専門誌よりも親しみやすく。
- **体験性 (UX Sync)**: 「読む」だけでなく「聴く」「弾く」と連動した体験を提供する。
- **Zero-Hallucination**: 架空のエピソードや誤った音楽理論は厳禁。不明な点は記述しない。
- **Master Data Compliance**: 作曲家名や作品名は、必ず `data/master/` 以下の定義ファイルを参照し、表記揺れを防ぐ。

---

## 2. 記事のティア (Tiering) とボリューム

| ティア       | 対象                 | 文字数目安    | 必須要素                                    |
| ------------ | -------------------- | ------------- | ------------------------------------------- |
| **Flagship** | 有名曲、検索流入の柱 | 3,000文字以上 | 全セクション網羅、譜例3つ以上、比較聴き比べ |
| **Standard** | 中堅曲、専門的な曲   | 1,500文字以上 | 基本構成網羅、譜例1つ以上                   |

---

## 3. 標準目次構成 (Standard Table of Contents)

Markdownの見出しレベル（Heading Level）は厳格に統一します。

- `#` (H1): 記事タイトル（`displayTitle`と一致させる）
- `##` (H2): 各大セクション（下記 (1)〜(8)）
- `###` (H3): セクション内の小分類（例：第1楽章、提示部など）

### (1) Frontmatter (Metadata)

MDXヘッダー。SEOと検索機能のために正確に記述する。

- `title`: 正式名称（日本語）
- `displayTitle`: 表示用タイトル（通称など含む）
- `composerName`: 作曲家名（主要な言語表記に従う）
- `status`: `published` | `draft`
- `readingLevel` / `performanceDifficulty`: 1-5の5段階評価

### (2) リード文 (The Hook)

- **役割**: 読者の興味を3秒で掴む。
- **内容**: 「なぜこの曲がすごいのか？」「誰の（どんな）曲か？」を簡潔に。
- **禁止**: 「〜について解説します」という退屈な書き出し。

### (3) 作品背景 (Historical Background)

- 作曲された時代、背景、作曲家の状況。
- 初演時のエピソードや、誰に捧げられたかなど。

### (4) 楽曲分析・解説 (Analysis & Deep Dive)

- **最重要セクション**。単なる感想ではなく、音楽的な構造（形式、和声、主題）に踏み込む。
- **構造**: 各楽章や部分ごとにH3見出しを使用する。
  - 例: `### 第1楽章: Allegro con brio`
- **譜例 (Musical Example)**:
  - **ABC記譜法の直接生成は不要**。
  - 代わりに「どのフレーズを提示すべきか」を特定し、`MusicalExample`コンポーネント（現在はプレースホルダー）を配置する意図をコメント等で残す。
  - 具体的な小節数や、「第1主題の提示」といったメタデータを記述する。

### (5) 演奏・聴取のポイント (Listening / Performance Guide)

- **聴き手向け**: 「ここを聴くと面白い」というマニアックなポイント。
- **弾き手向け**: 演奏上の難所や、解釈のヒント。

### (6) おすすめ録音・比較 (Recommended Recordings)

- 歴史的名盤と、現代の優れた録音を紹介。
- 可能であれば、異なる解釈（テンポが極端に違う、楽器が違うなど）を並べて比較する。

### (7) 参考文献 (References / Bibliography)

- 記事の信頼性を担保するため、参照した主要な情報源を記載する。
- Wikipedia、IMSLP、New Grove、信頼できる音楽解説サイトなど、最大5つを目安とする。
- 形式: `- [サイト名](URL): 簡単な説明`

### (8) 関連記事 (Related Articles)

- サイト内回遊率（LTV）を高めるため、関連するPreludioLab内の記事へのリンクを配置する。
- 同じ作曲家、同じジャンル、同時代の作品など。

---

## 4. トーン＆マナー (Tone & Style)

- **文体**: 「です・ます」調。丁寧だが堅苦しくない。
- **熱量**: 客観的な事実の羅列で終わらせず、執筆者の「音楽への愛」が滲み出るような表現を心がける。
  - NG: 「この曲はハ長調で書かれています。」
  - OK: 「晴れやかなハ長調で開始され、聴く人の心を一瞬で明るく照らします。」
- **専門用語**: 音楽用語（ソナタ形式、カデンツなど）は積極的に使うが、初心者向けに文脈で意味がわかるように補足するか、用語集へのリンクを意識する。

---

## 5. マスタデータ準拠 (Master Data Compliance)

AIエージェントは、記事作成時に必ず以下のJSONファイルを参照し、エンティティの表記を統一してください。

- **参照先**: `data/master/{entity_slug}.json` (例: `data/master/beethoven.json`)
- **優先順位**:
  1.  マスタデータ (`displayName`, `workTitle` 等)
  2.  公式データベース (IMSLP, Wikipedia)
- **運用**:
  - `composerName` や `displayTitle` は、JSON内の定義と一言一句一致させること。
  - 推論時にファイルが見当たらない場合は、ユーザーに確認するか、一般的な表記を用いるが、後の工程で修正されることを前提とする。
- **多言語データの意味的整合性 (Semantic Integrity)**:
  - `MultilingualString` (title等) において、各言語のフィールドは**必ず同じ概念の翻訳**であること。
  - 言語ごとに「テンポ表記」と「楽章番号」を混ぜるといった、情報の種類を変える編集は厳禁。
  - 楽曲（Work）および楽章（WorkPart）において、タイトル（`title`）には以下の「統合タイトルルール」を適用し、情報の網羅性と一貫性を確保すること。

**統合タイトルルール (Consolidated Title Rule)**:

- **title (Full Title)**: 最終的に表示されるべき完全な文字列。構成は `{prefix} {content} {nickname}` とする。
- **titleComponents**: titleを構成する各要素を分離したオブジェクト。
- **prefix**:
  - ja: 「第n楽章」「第n番」「第n幕」等
  - en: 「I.」「II.」「No. n」「Act n」等 (ローマ数字や略称を使用)
- **content**:
  - 固有の曲名がある場合はそれを優先し、原則として調性（Key）は含めない（例：「第4曲 木星、快楽をもたらす者」）。
  - 固有の曲名がない場合（ソナタ、交響曲等）は、「テンポ表示 + 調性」をセットで記述（例：「第1楽章 アレグロ・コン・ブリオ ハ短調」）。
- **nickname**:
  - 存在する場合のみ末尾に付与。jaは「 」（全角鍵括弧）、enは " " （半角ダブルクォーテーション）で囲む。
- **意味的整合性**:
  - 各言語のフィールドは必ず同じ情報の翻訳であること。言語間で「テンポ」と「楽章番号」を混ぜない。
- **重複の排除**:
  - `titleComponents.nickname` が存在する場合、マスタデータJSONにおける `popularTitle` フィールドは冗長なため**使用しない**（ドメインモデル側で解決する）。

---

## 6. MDX技術仕様 (Technical Specs)

### 見出し構造の例

```markdown
# 交響曲第5番 ハ短調『運命』

...リード文...

## 作品背景

...

## 楽曲分析

### 第1楽章

...
<MusicalExample id="theme-1" description="第1主題" />
...

### 第2楽章

...
```

### 内部リンク

- 作曲家や関連用語への言及がある場合、適切なMarkdownリンクを設定する文章構造にする（リンク先URLはシステム側で解決するため、プレースホルダーでも可）。

---

このルールに基づき、ドラフトを作成してください。
