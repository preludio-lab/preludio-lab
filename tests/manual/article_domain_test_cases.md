# Articleドメイン 手動検証手順書 (兼 E2Eテストケース案)

このドキュメントは、Articleドメインのリファクタリング（Feature: 5.5）に伴う動作確認手順をまとめたものです。
将来的なE2Eテスト（Playwright/Cypress等）のテストシナリオとして利用可能な形式で記述しています。

## テスト環境

- **Base URL**: `http://localhost:3000`
- **Language**: `ja` (日本語), `en` (英語)

---

## 1. 記事詳細ページ (Article Detail Page)

**URL Pattern**: `/{lang}/{category}/{...slug}`
**Example**: `/ja/works/bach/prelude-1`

### Scenario 1.1: 既存記事の正常表示 (Legacy Compatibility)

**目的**: 旧来のMDXコンテンツが、新システム移行後も崩れずに表示されることを確認する。

| Step | Action                                               | Expected Result                                            | Note                                                          |
| :--- | :--------------------------------------------------- | :--------------------------------------------------------- | :------------------------------------------------------------ |
| 1    | ブラウザで `/ja/works/bach/prelude-1` にアクセスする | ページが200 OKでロードされる                               |                                                               |
| 2    | ヘッダー情報を確認                                   | タイトル「Prelude 1」、作曲家「J.S. Bach」が表示されている | `metadata.composer` -> `metadata.composerName` マッピング確認 |
| 3    | メタデータバッジを確認                               | カテゴリ「WORKS」、難易度「INTERMEDIATE」が表示されている  | 旧 `difficulty` 文字列が新バッジにマッピングされていること    |
| 4    | 目次（TOC）を確認                                    | サイドバーに目次が表示され、クリックでスクロールする       |                                                               |
| 5    | 本文を確認                                           | MDX本文がレンダリングされている                            |                                                               |

### Scenario 1.2: プレイヤー機能の動作

**目的**: `audioSrc` を持つ記事で、プレイヤーコンポーネントが機能することを確認する。

| Step | Action                                                                          | Expected Result                                    | Note                                |
| :--- | :------------------------------------------------------------------------------ | :------------------------------------------------- | :---------------------------------- |
| 1    | 音声データを持つ記事（例: `/ja/works/chopin/nocturne-op9-2` ※要確認）にアクセス | ページ上部またはサイドバーにプレイヤーが表示される |                                     |
| 2    | 再生ボタンをクリック                                                            | 音声が再生される                                   | `audioSrc` が正しく渡されていること |

### Scenario 1.3: 存在しない記事へのアクセス

**目的**: 404エラーハンドリングの確認。

| Step | Action                                  | Expected Result                  | Note |
| :--- | :-------------------------------------- | :------------------------------- | :--- |
| 1    | `/ja/works/invalid-slug-123` にアクセス | 404 Not Found ページが表示される |      |

### Scenario 1.4: ネストされたパスの解決

**目的**: スラグが階層構造を持つ場合のルーティング確認。

| Step | Action                                                         | Expected Result  | Note                                       |
| :--- | :------------------------------------------------------------- | :--------------- | :----------------------------------------- |
| 1    | 階層パスを持つ記事（例: `/ja/works/bach/prelude-1`）にアクセス | 正常に表示される | 以前修正した `slug.join('/')` の回帰テスト |

---

## 2. カテゴリ一覧ページ (Category Index Page)

**URL Pattern**: `/{lang}/{category}`
**Example**: `/ja/works`

### Scenario 2.1: 記事一覧の表示

**目的**: 指定カテゴリの記事がリスト表示されることを確認する。

| Step | Action                 | Expected Result                                          | Note                                 |
| :--- | :--------------------- | :------------------------------------------------------- | :----------------------------------- |
| 1    | `/ja/works` にアクセス | 記事カードのリストが表示される                           | `ListArticlesUseCase` の動作確認     |
| 2    | カードの内容を確認     | サムネイル、タイトル、作曲家名、公開日時が表示されている | `ArticleSummaryDto` アダプターの確認 |
| 3    | カードをクリック       | 該当する詳細ページへ遷移する                             | リンク切れがないこと                 |

### Scenario 2.2: 異言語での表示

**目的**: 多言語ルーティングとコンテンツ取得の確認。

| Step | Action                 | Expected Result                              | Note                              |
| :--- | :--------------------- | :------------------------------------------- | :-------------------------------- |
| 1    | `/en/works` にアクセス | 英語のコンテンツ（または英語UI）が表示される | URLプレフィックス `en` の動作確認 |

---

## 3. SEO & Metadata

**目的**: OGPタグやcanonical URLが正しく出力されているか確認する。

| Step | Action                                | Expected Result                                                                   | Note |
| :--- | :------------------------------------ | :-------------------------------------------------------------------------------- | :--- |
| 1    | ページのソースを表示 (`Cmd+Option+U`) | `<title>`, `<meta name="description">` が出力されている                           |      |
| 2    | Canonicalタグ確認                     | `<link rel="canonical" href="...">` が現在のURLと一致している                     |      |
| 1    | ページのソースを表示 (`Cmd+Option+U`) | `<title>`, `<meta name="description">`, `<link rel="canonical">` が出力されている |      |

---

## 4. トップページ (Top Page)

**URL**: `/ja`, `/en`

### Scenario 4.1: ピックアップ（Featured Work）の表示

**目的**: おすすめ記事が適切にタイトル、作曲家名、サムネイルとともに表示されることを確認する。

| Step | Action                          | Expected Result                                                            | Note           |
| :--- | :------------------------------ | :------------------------------------------------------------------------- | :------------- |
| 1    | トップページ（`/ja`）にアクセス | 「ピックアップ」セクションが表示される                                     |                |
| 2    | メインのヒーローカードを確認    | タイトル、作曲家名（「～の作品。」）、サムネイル画像が正しく表示されている | 今回の修正対象 |
| 3    | 「記事を読む」をクリック        | 該当する詳細ページに正常に遷移する                                         |                |

### Scenario 4.2: コンテンツ探索（Discover）の表示

**目的**: カテゴリ別のリンクが期待通り機能することを確認する。

| Step | Action                                                 | Expected Result                             | Note |
| :--- | :----------------------------------------------------- | :------------------------------------------ | :--- |
| 1    | 「コンテンツを探す」セクションの「楽曲紹介」をクリック | カテゴリ一覧ページ（`/ja/works`）に遷移する |      |
